package(default_visibility=['//agent_engine/engine:__subpackages__'])

cc_library(
    name='common_lib',
    srcs=glob([
        'common.cc',
    ]),
    hdrs=glob([
        'common.h'
    ]),
    copts=['-Werror'],
    include_prefix='engine',
    alwayslink=1
)

cc_library(
    name='worker_base_lib',
    srcs=glob([
        'worker_base.cc',
        'main.cc'
    ]),
    hdrs=glob(['worker_base.h']),
    copts=['-Werror'],
    include_prefix='engine',
    deps=[
        '//agent_engine/util:log',
        '//agent_engine/util:scope',
        '//agent_engine/util:option_parser',
        '//agent_engine/util:string_helper',
        '//agent_engine/util:file_util',
        ':common_lib',
    ],
    alwayslink=1
)

cc_library(
    name='admin_lib',
    srcs=glob(['admin_worker.cc']),
    hdrs=glob(['admin_worker.h']),
    copts=['-Werror'],
    include_prefix='engine',
    deps=[
        ':worker_base_lib',
    ],
    alwayslink=1
)

cc_binary(
    name='admin_bin',
    srcs=['admin_worker_creator.cc'],
    copts=['-Werror'],
    visibility=['//visibility:public'],
    deps=[
        ':admin_lib',
    ]
)
